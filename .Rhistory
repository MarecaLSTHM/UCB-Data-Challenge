# We can have this as a bar graph
ggplot(prescription_data_grouped, aes(y = Total_Prescriptions, x = factor(Year) )) +
geom_bar(stat = "identity", fill = "purple", width = 0.7) +  # Adjust fill color and width as needed
geom_text(aes(label = paste("(", Year, ";", Total_Prescriptions, ")", sep = "")),
vjust = -0.5, hjust = 0.5, color = "red", size = 3) +  # Add text labels with adjustments
labs(title = paste("Osteoporosis medication prescription trends over",
"the last 5 years in England",
sep = "\n"),
x = "Year",
y = "Prescriptions") +
scale_y_continuous(labels = scales::label_number_si()) +
theme(plot.title = element_text(hjust = 0.5))
# We can have this as a bar graph
ggplot(prescription_data_grouped, aes(y = Total_Prescriptions, x = factor(Year) )) +
geom_bar(stat = "identity", fill = "purple", width = 0.7) +  # Adjust fill color and width as needed
geom_text(aes(label = paste("(", Year, ";", Total_Prescriptions, ")", sep = "")),
vjust = -0.5, hjust = 0.5, color = "black", size = 3) +  # Add text labels with adjustments
labs(title = paste("Osteoporosis medication prescription trends over",
"the last 5 years in England",
sep = "\n"),
x = "Year",
y = "Prescriptions") +
scale_y_continuous(labels = scales::label_number_si()) +
theme(plot.title = element_text(hjust = 0.5))
# We can have this as a bar graph
ggplot(prescription_data_grouped, aes(y = Total_Prescriptions, x = factor(Year) )) +
geom_bar(stat = "identity", fill = "purple", width = 0.7) +  # Adjust fill color and width as needed
geom_text(aes(label = paste("(", Year, ";", Total_Prescriptions, ")", sep = "")),
vjust = -0.5, hjust = 0.5, color = "black", size = 3) +  # Add text labels with adjustments
labs(title = paste("Osteoporosis medication prescription trends over",
"the last 5 years in England",
sep = "\n"),
x = "Year",
y = "Prescriptions") +
scale_y_continuous(labels = scales::label_number_si()) +
theme(plot.title = element_text(hjust = 0.5),
panel.grid = element_blank())  # Remove grid lines
# We can have this as a bar graph
ggplot(prescription_data_grouped, aes(y = Total_Prescriptions, x = factor(Year) )) +
geom_bar(stat = "identity", fill = "purple", width = 0.7) +  # Adjust fill color and width as needed
geom_text(aes(label = paste("(", Year, ";", Total_Prescriptions, ")", sep = "")),
vjust = -0.5, hjust = 0.5, color = "black", size = 3) +  # Add text labels with adjustments
labs(title = paste("Osteoporosis medication prescription trends over",
"the last 5 years in England",
sep = "\n"),
x = "Year",
y = "Prescriptions") +
scale_y_continuous(labels = scales::label_number_si()) +
theme(plot.title = element_text(hjust = 0.5),
panel.grid = element_blank(),
plot.background = element_rect(fill = "white"))  # Remove grid lines and set background to white
# We can have this as a bar graph
ggplot(prescription_data_grouped, aes(y = Total_Prescriptions, x = factor(Year) )) +
geom_bar(stat = "identity", fill = "purple", width = 0.7) +  # Adjust fill color and width as needed
geom_text(aes(label = paste("(", Year, ";", Total_Prescriptions, ")", sep = "")),
vjust = -0.5, hjust = 0.5, color = "black", size = 3) +  # Add text labels with adjustments
labs(title = paste("Osteoporosis medication prescription trends over",
"the last 5 years in England",
sep = "\n"),
x = "Year",
y = "Prescriptions") +
scale_y_continuous(labels = scales::label_number_si()) +
theme(plot.title = element_text(hjust = 0.5),
panel.grid = element_blank(),
panel.background = element_rect(fill = "white"),
plot.background = element_rect(fill = "white"))  # Remove grid lines and set background to white
# We can have this as a bar graph
ggplot(prescription_data_grouped, aes(y = Total_Prescriptions, x = factor(Year) )) +
geom_bar(stat = "identity", fill = "purple", width = 0.5) +  # Adjust fill color and width as needed
geom_text(aes(label = paste("(", Year, ";", Total_Prescriptions, ")", sep = "")),
vjust = -0.5, hjust = 0.5, color = "black", size = 3) +  # Add text labels with adjustments
labs(title = paste("Osteoporosis medication prescription trends over",
"the last 5 years in England",
sep = "\n"),
x = "Year",
y = "Prescriptions") +
scale_y_continuous(labels = scales::label_number_si()) +
theme(plot.title = element_text(hjust = 0.5),
panel.grid = element_blank(),
panel.background = element_rect(fill = "white"),
plot.background = element_rect(fill = "white"))
# We can have this as a bar graph
ggplot(prescription_data_grouped, aes(y = Total_Prescriptions, x = factor(Year) )) +
geom_bar(stat = "identity", fill = "purple", width = 1.0) +  # Adjust fill color and width as needed
geom_text(aes(label = paste("(", Year, ";", Total_Prescriptions, ")", sep = "")),
vjust = -0.5, hjust = 0.5, color = "black", size = 3) +  # Add text labels with adjustments
labs(title = paste("Osteoporosis medication prescription trends over",
"the last 5 years in England",
sep = "\n"),
x = "Year",
y = "Prescriptions") +
scale_y_continuous(labels = scales::label_number_si()) +
theme(plot.title = element_text(hjust = 0.5),
panel.grid = element_blank(),
panel.background = element_rect(fill = "white"),
plot.background = element_rect(fill = "white"))  # Remove grid lines and set background to white
# We can have this as a bar graph
ggplot(prescription_data_grouped, aes(y = Total_Prescriptions, x = factor(Year) )) +
geom_bar(stat = "identity", fill = "purple", width = 0.8) +  # Adjust fill color and width as needed
geom_text(aes(label = paste("(", Year, ";", Total_Prescriptions, ")", sep = "")),
vjust = -0.5, hjust = 0.5, color = "black", size = 3) +  # Add text labels with adjustments
labs(title = paste("Osteoporosis medication prescription trends over",
"the last 5 years in England",
sep = "\n"),
x = "Year",
y = "Prescriptions") +
scale_y_continuous(labels = scales::label_number_si()) +
theme(plot.title = element_text(hjust = 0.5),
panel.grid = element_blank(),
panel.background = element_rect(fill = "white"),
plot.background = element_rect(fill = "white"))
# We can have this as a bar graph
ggplot(prescription_data_grouped, aes(y = Total_Prescriptions, x = factor(Year) )) +
geom_bar(stat = "identity", fill = "purple", width = 0.8) +  # Adjust fill color and width as needed
geom_text(aes(label = paste(Total_Prescriptions, sep = "")),
vjust = -0.5, hjust = 0.5, color = "black", size = 3) +  # Add text labels with adjustments
labs(title = paste("Osteoporosis medication prescription trends over",
"the last 5 years in England",
sep = "\n"),
x = "Year",
y = "Prescriptions") +
scale_y_continuous(labels = scales::label_number_si()) +
theme(plot.title = element_text(hjust = 0.5),
panel.grid = element_blank(),
panel.background = element_rect(fill = "white"),
plot.background = element_rect(fill = "white"))
# We can have this as a bar graph
ggplot(prescription_data_grouped, aes(y = Total_Prescriptions, x = factor(Year) )) +
geom_bar(stat = "identity", fill = "red", width = 0.8) +  # Adjust fill color and width as needed
geom_text(aes(label = paste(Total_Prescriptions, sep = "")),
vjust = -0.5, hjust = 0.5, color = "black", size = 3) +  # Add text labels with adjustments
labs(title = paste("Osteoporosis medication prescription trends over",
"the last 5 years in England",
sep = "\n"),
x = "Year",
y = "Prescriptions") +
scale_y_continuous(labels = scales::label_number_si()) +
theme(plot.title = element_text(hjust = 0.5),
panel.grid = element_blank(),
panel.background = element_rect(fill = "white"),
plot.background = element_rect(fill = "white"))  # Remove grid lines and set background to white
# We can have this as a bar graph
ggplot(prescription_data_grouped, aes(y = Total_Prescriptions, x = factor(Year) )) +
geom_bar(stat = "identity", fill = "red", width = 0.9) +  # Adjust fill color and width as needed
geom_text(aes(label = paste(Total_Prescriptions, sep = "")),
vjust = -0.5, hjust = 0.5, color = "black", size = 3) +  # Add text labels with adjustments
labs(title = paste("Osteoporosis medication prescription trends over",
"the last 5 years in England",
sep = "\n"),
x = "Year",
y = "Prescriptions") +
scale_y_continuous(labels = scales::label_number_si()) +
theme(plot.title = element_text(hjust = 0.5),
panel.grid = element_blank(),
panel.background = element_rect(fill = "white"),
plot.background = element_rect(fill = "white"))
library(tidyverse)
library(lubridate)
library(here)
setwd(here())
dat <- read.csv("data/By Region.csv")
# Create data subsets by regions
data_eoe <- subset(dat, name == "EAST OF ENGLAND COMMISSIONING REGION")
data_ldn <- subset(dat, name == "LONDON COMMISSIONING REGION")
data_mid <- subset(dat, name == "MIDLANDS COMMISSIONING REGION")
data_ney <- subset(dat, name == "NORTH EAST AND YORKSHIRE COMMISSIONING REGION")
data_nw <- subset(dat, name == "NORTH WEST COMMISSIONING REGION")
data_se <- subset(dat, name == "SOUTH EAST COMMISSIONING REGION")
data_sw <- subset(dat, name == "SOUTH WEST COMMISSIONING REGION")
# Combine the datasets
combined_data <- bind_rows(
mutate(data_eoe, Region = "East of England"),
mutate(data_ldn, Region = "London"),
mutate(data_mid, Region = "Midlands"),
mutate(data_ney, Region = "North East"),
mutate(data_nw, Region = "North West"),
mutate(data_se, Region = "South East"),
mutate(data_sw, Region = "South West")
)
# Order the color categories by the highest to lowest value
combined_data$Region <- factor(combined_data$Region,
levels = unique(combined_data$Region[order(combined_data$y_items,
decreasing = TRUE)]))
# Convert 'date' to Date type
combined_data$date <- as.Date(combined_data$date)
# Create a time series plot using ggplot2
time_series_plot <- ggplot(combined_data, aes(x = date, y = y_items,
color = Region, shape = Region)) +
geom_line() +
# geom_path(aes(group=Region)) +
geom_point() +
labs(title = paste("Prescription of Bisphosphonates in",
"regions of England in the last 5 years", sep = '\n'),
x = "Date",
y = "Prescriptions",
color = "Region",
shape = "Region") +
scale_shape_manual(values = c("Midlands" = 16,
"North East" = 17,
"South East" = 18,
"North West" = 19,
"London" = 20,
"East of England" = 21,
"South West"= 22)) +
scale_y_continuous(labels = scales::label_number_si()) +
scale_x_date(date_breaks = "1 year", date_labels = "%Y") +  # Set breaks and labels for years
# Center the title, remove gridlines and change background
theme(plot.title = element_text(hjust = 0.5),
panel.grid = element_blank(),
panel.background = element_rect(fill = "white"),
plot.background = element_rect(fill = "white"))
# Display the plot
print(time_series_plot)
# Print the PNG output to the output folder
png("output/bisphosphonates_regions_by_time.png")
ggplot(combined_data, aes(x = date, y = y_items,
color = Region, shape = Region)) +
geom_line() +
geom_point() +
labs(title = paste("Prescription of Bisphosphonates in",
"regions of England in the last 5 years", sep = '\n'),
x = "Date",
y = "Prescriptions",
color = "Region",
shape = "Region") +
scale_shape_manual(values = c("Midlands" = 16,
"North East" = 17,
"South East" = 18,
"North West" = 19,
"London" = 20,
"East of England" = 21,
"South West"= 22)) +
scale_y_continuous(labels = scales::label_number_si()) +
scale_x_date(date_breaks = "1 year", date_labels = "%Y") +  # Set breaks and labels for years
theme(plot.title = element_text(hjust = 0.5),
panel.grid = element_blank(),
panel.background = element_rect(fill = "white"),
plot.background = element_rect(fill = "white"))  # Center the title
dev.off()
library(tidyverse)
library(lubridate)
library(here)
setwd(here())
dat <- read.csv("data/By Region.csv")
# Create data subsets by regions
data_eoe <- subset(dat, name == "EAST OF ENGLAND COMMISSIONING REGION")
data_ldn <- subset(dat, name == "LONDON COMMISSIONING REGION")
data_mid <- subset(dat, name == "MIDLANDS COMMISSIONING REGION")
data_ney <- subset(dat, name == "NORTH EAST AND YORKSHIRE COMMISSIONING REGION")
data_nw <- subset(dat, name == "NORTH WEST COMMISSIONING REGION")
data_se <- subset(dat, name == "SOUTH EAST COMMISSIONING REGION")
data_sw <- subset(dat, name == "SOUTH WEST COMMISSIONING REGION")
# Combine the datasets
combined_data <- bind_rows(
mutate(data_eoe, Region = "East of England"),
mutate(data_ldn, Region = "London"),
mutate(data_mid, Region = "Midlands"),
mutate(data_ney, Region = "North East"),
mutate(data_nw, Region = "North West"),
mutate(data_se, Region = "South East"),
mutate(data_sw, Region = "South West")
)
# Order the color categories by the highest to lowest value
combined_data$Region <- factor(combined_data$Region,
levels = unique(combined_data$Region[order(combined_data$y_items,
decreasing = TRUE)]))
# Convert 'date' to Date type
combined_data$date <- as.Date(combined_data$date)
# Create a time series plot using ggplot2
time_series_plot <- ggplot(combined_data, aes(x = date, y = y_items,
color = Region, shape = Region)) +
geom_line() +
# geom_path(aes(group=Region)) +
geom_point() +
labs(title = paste("Prescription of Bisphosphonates in",
"regions of England in the last 5 years", sep = '\n'),
x = "Date",
y = "Prescriptions",
color = "Region",
shape = "Region") +
scale_shape_manual(values = c("Midlands" = 16,
"North East" = 17,
"South East" = 18,
"North West" = 19,
"London" = 20,
"East of England" = 21,
"South West"= 22)) +
scale_y_continuous(labels = scales::label_number_si()) +
scale_x_date(date_breaks = "1 year", date_labels = "%Y") +  # Set breaks and labels for years
# Center the title, remove gridlines and change background
theme(plot.title = element_text(hjust = 0.5),
panel.background = element_rect(fill = "white"),
plot.background = element_rect(fill = "white"))
# Display the plot
print(time_series_plot)
# Print the PNG output to the output folder
png("output/bisphosphonates_regions_by_time.png")
ggplot(combined_data, aes(x = date, y = y_items,
color = Region, shape = Region)) +
geom_line() +
geom_point() +
labs(title = paste("Prescription of Bisphosphonates in",
"regions of England in the last 5 years", sep = '\n'),
x = "Date",
y = "Prescriptions",
color = "Region",
shape = "Region") +
scale_shape_manual(values = c("Midlands" = 16,
"North East" = 17,
"South East" = 18,
"North West" = 19,
"London" = 20,
"East of England" = 21,
"South West"= 22)) +
scale_y_continuous(labels = scales::label_number_si()) +
scale_x_date(date_breaks = "1 year", date_labels = "%Y") +  # Set breaks and labels for years
theme(plot.title = element_text(hjust = 0.5),
panel.background = element_rect(fill = "white"),
plot.background = element_rect(fill = "white"))  # Center the title
dev.off()
library(tidyverse)
library(lubridate)
library(here)
setwd(here())
dat <- read.csv("data/By Region.csv")
# Create data subsets by regions
data_eoe <- subset(dat, name == "EAST OF ENGLAND COMMISSIONING REGION")
data_ldn <- subset(dat, name == "LONDON COMMISSIONING REGION")
data_mid <- subset(dat, name == "MIDLANDS COMMISSIONING REGION")
data_ney <- subset(dat, name == "NORTH EAST AND YORKSHIRE COMMISSIONING REGION")
data_nw <- subset(dat, name == "NORTH WEST COMMISSIONING REGION")
data_se <- subset(dat, name == "SOUTH EAST COMMISSIONING REGION")
data_sw <- subset(dat, name == "SOUTH WEST COMMISSIONING REGION")
# Combine the datasets
combined_data <- bind_rows(
mutate(data_eoe, Region = "East of England"),
mutate(data_ldn, Region = "London"),
mutate(data_mid, Region = "Midlands"),
mutate(data_ney, Region = "North East"),
mutate(data_nw, Region = "North West"),
mutate(data_se, Region = "South East"),
mutate(data_sw, Region = "South West")
)
# Order the color categories by the highest to lowest value
combined_data$Region <- factor(combined_data$Region,
levels = unique(combined_data$Region[order(combined_data$y_items,
decreasing = TRUE)]))
# Convert 'date' to Date type
combined_data$date <- as.Date(combined_data$date)
# Create a time series plot using ggplot2
time_series_plot <- ggplot(combined_data, aes(x = date, y = y_items,
color = Region, shape = Region)) +
geom_line() +
# geom_path(aes(group=Region)) +
geom_point() +
labs(title = paste("Prescription of Bisphosphonates in",
"regions of England in the last 5 years", sep = '\n'),
x = "Date",
y = "Prescriptions",
color = "Region",
shape = "Region") +
scale_shape_manual(values = c("Midlands" = 16,
"North East" = 17,
"South East" = 18,
"North West" = 19,
"London" = 20,
"East of England" = 21,
"South West"= 22)) +
scale_y_continuous(labels = scales::label_number_si()) +
scale_x_date(date_breaks = "1 year", date_labels = "%Y") +  # Set breaks and labels for years
# Center the title, remove gridlines and change background
theme(plot.title = element_text(hjust = 0.5))
# Display the plot
print(time_series_plot)
# Print the PNG output to the output folder
png("output/bisphosphonates_regions_by_time.png")
ggplot(combined_data, aes(x = date, y = y_items,
color = Region, shape = Region)) +
geom_line() +
geom_point() +
labs(title = paste("Prescription of Bisphosphonates in",
"regions of England in the last 5 years", sep = '\n'),
x = "Date",
y = "Prescriptions",
color = "Region",
shape = "Region") +
scale_shape_manual(values = c("Midlands" = 16,
"North East" = 17,
"South East" = 18,
"North West" = 19,
"London" = 20,
"East of England" = 21,
"South West"= 22)) +
scale_y_continuous(labels = scales::label_number_si()) +
scale_x_date(date_breaks = "1 year", date_labels = "%Y") +  # Set breaks and labels for years
theme(plot.title = element_text(hjust = 0.5))  # Center the title
dev.off()
# We can have this as a bar graph
ggplot(prescription_data_grouped, aes(y = Total_Prescriptions, x = factor(Year) )) +
geom_bar(stat = "identity", fill = "red", width = 0.9) +  # Adjust fill color and width as needed
geom_text(aes(label = paste(Total_Prescriptions, sep = "")),
vjust = -0.5, hjust = 0.5, color = "black", size = 3) +  # Add text labels with adjustments
labs(title = paste("Osteoporosis medication prescription trends over",
"the last 5 years in England",
sep = "\n"),
x = "Year",
y = "Prescriptions") +
scale_y_continuous(labels = scales::label_number_si()) +
theme(plot.title = element_text(hjust = 0.5),
panel.grid = element_blank(),
panel.background = element_rect(fill = "white"),
plot.background = element_rect(fill = "white"))
# Plotting the time series for the entire country(modified)
ggplot(prescription_data_grouped, aes(x = Year, y = Total_Prescriptions, group = 1)) +
geom_line() +
geom_point(shape = 2) +
geom_text(aes(label = paste("(",Year, ";", Total_Prescriptions,")")), vjust = -0.5, hjust = 0.5) + # Add text labels
labs(title = paste("Osteoporosis medicatication prescription trends over", "the last 5 years in England", sep="\n"),
x = "Year",
y = "Prescriptions") +
scale_y_continuous(labels = scales::label_number_si()) +
theme(plot.title = element_text(hjust = 0.5))  # Center the title and remove background
# Plotting the time series for the entire country(modified)
ggplot(prescription_data_grouped, aes(x = Year, y = Total_Prescriptions, group = 1)) +
geom_line() +
geom_point(shape = 2) +
geom_text(aes(label = paste("(",Year, ";", Total_Prescriptions,")")), vjust = -0.5, hjust = 0.5) + # Add text labels
labs(title = paste("Osteoporosis medicatication prescription trends over", "the last 5 years in England", sep="\n"),
x = "Year",
y = "Prescriptions") +
scale_y_continuous(labels = scales::label_number_si()) +
theme(plot.title = element_text(hjust = 0.5),
panel.grid = element_blank(),
panel.background = element_rect(fill = "white"),
plot.background = element_rect(fill = "white"))  # Center the title and remove background
library(tidyverse)
library(lubridate)
library(here)
setwd(here())
dat <- read.csv("data/By Region.csv")
# Create data subsets by regions
data_eoe <- subset(dat, name == "EAST OF ENGLAND COMMISSIONING REGION")
data_ldn <- subset(dat, name == "LONDON COMMISSIONING REGION")
data_mid <- subset(dat, name == "MIDLANDS COMMISSIONING REGION")
data_ney <- subset(dat, name == "NORTH EAST AND YORKSHIRE COMMISSIONING REGION")
data_nw <- subset(dat, name == "NORTH WEST COMMISSIONING REGION")
data_se <- subset(dat, name == "SOUTH EAST COMMISSIONING REGION")
data_sw <- subset(dat, name == "SOUTH WEST COMMISSIONING REGION")
# Combine the datasets
combined_data <- bind_rows(
mutate(data_eoe, Region = "East of England"),
mutate(data_ldn, Region = "London"),
mutate(data_mid, Region = "Midlands"),
mutate(data_ney, Region = "North East"),
mutate(data_nw, Region = "North West"),
mutate(data_se, Region = "South East"),
mutate(data_sw, Region = "South West")
)
# Order the color categories by the highest to lowest value
combined_data$Region <- factor(combined_data$Region,
levels = unique(combined_data$Region[order(combined_data$y_items,
decreasing = TRUE)]))
# Convert 'date' to Date type
combined_data$date <- as.Date(combined_data$date)
# Create a time series plot using ggplot2
time_series_plot <- ggplot(combined_data, aes(x = date, y = y_items,
color = Region, shape = Region)) +
geom_line() +
# geom_path(aes(group=Region)) +
geom_point() +
labs(title = paste("Prescription of Bisphosphonates in",
"regions of England in the last 5 years", sep = '\n'),
x = "Date",
y = "Prescriptions",
color = "Region",
shape = "Region") +
scale_shape_manual(values = c("Midlands" = 16,
"North East" = 17,
"South East" = 18,
"North West" = 19,
"London" = 20,
"East of England" = 21,
"South West"= 22)) +
scale_y_continuous(labels = scales::label_number_si()) +
scale_x_date(date_breaks = "1 year", date_labels = "%Y") +  # Set breaks and labels for years
# Center the title, remove gridlines and change background
theme(plot.title = element_text(hjust = 0.5))
# Display the plot
print(time_series_plot)
# Print the PNG output to the output folder
png("output/bisphosphonates_regions_by_time.png")
ggplot(combined_data, aes(x = date, y = y_items,
color = Region, shape = Region)) +
geom_line() +
geom_point() +
labs(title = paste("Prescription of Bisphosphonates in",
"regions of England in the last 5 years", sep = '\n'),
x = "Date",
y = "Prescriptions",
color = "Region",
shape = "Region") +
scale_shape_manual(values = c("Midlands" = 16,
"North East" = 17,
"South East" = 18,
"North West" = 19,
"London" = 20,
"East of England" = 21,
"South West"= 22)) +
scale_y_continuous(labels = scales::label_number_si()) +
scale_x_date(date_breaks = "1 year", date_labels = "%Y") +  # Set breaks and labels for years
theme(plot.title = element_text(hjust = 0.5))  # Center the title
dev.off()
